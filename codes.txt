
# First version
# excluded_ids = []
# discounts = self.discount.all()
# our_cost = float(self.cost)

# main_result = 0
# main_result_couse_discount = 0
# couse_discount_form = 0

# for discount in discounts:
#     discount.amount = float(discount.amount)
#     if int(discount.constant_or_percentage) == 0:
#         result = our_cost - (our_cost * discount.amount)/100
#     elif int(discount.constant_or_percentage) == 1:
#         result = our_cost - discount.amount
#     if result > main_result:
#         main_result = result
#         main_result_couse_discount = discount.amount
#         couse_discount_form = int(discount.constant_or_percentage)
# if couse_discount_form == 1:
#     our_cost -= main_result_couse_discount
# elif couse_discount_form == 0:
#     our_cost = our_cost - (our_cost * main_result_couse_discount)/100
    
# print(our_cost, 'our resulted cost 1')
# print(main_result_couse_discount, 'the couse of upper cost 1')
# excluded_ids.append(discounts.filter(amount = main_result_couse_discount).values_list('id', flat=True).first())
# print(excluded_ids)
# discounts = self.discount.all().exclude(id__in=excluded_ids)


# main_result = 0
# main_result_couse_discount = 0
# couse_discount_form = 0

# for discount in discounts:
#     discount.amount = float(discount.amount)
#     if int(discount.constant_or_percentage) == 0:
#         result = our_cost - (our_cost * discount.amount)/100
#     elif int(discount.constant_or_percentage) == 1:
#         result = our_cost - discount.amount
#     if result > main_result:
#         main_result = result
#         main_result_couse_discount = discount.amount
#         couse_discount_form = int(discount.constant_or_percentage)
# if couse_discount_form == 1:
#     our_cost -= main_result_couse_discount
# elif couse_discount_form == 0:
#     our_cost = our_cost - (our_cost * main_result_couse_discount)/100
    
# print(our_cost, 'our resulted cost 1')
# print(main_result_couse_discount, 'the couse of upper cost 1')
# excluded_ids.append(discounts.filter(amount = main_result_couse_discount).values_list('id', flat=True).first())
# print(excluded_ids)
# discounts = self.discount.all().exclude(id__in=excluded_ids)

# main_result = 0
# main_result_couse_discount = 0
# couse_discount_form = 0

# for discount in discounts:
#     discount.amount = float(discount.amount)
#     if int(discount.constant_or_percentage) == 0:
#         result = our_cost - (our_cost * discount.amount)/100
#     elif int(discount.constant_or_percentage) == 1:
#         result = our_cost - discount.amount
#     if result > main_result:
#         main_result = result
#         main_result_couse_discount = discount.amount
#         couse_discount_form = int(discount.constant_or_percentage)
# if couse_discount_form == 1:
#     our_cost -= main_result_couse_discount
# elif couse_discount_form == 0:
#     our_cost = our_cost - (our_cost * main_result_couse_discount)/100
    
# print(our_cost, 'our resulted cost 1')
# print(main_result_couse_discount, 'the couse of upper cost 1')
# excluded_ids.append(discounts.filter(amount = main_result_couse_discount).values_list('id', flat=True).first())
# print(excluded_ids)
# discounts = self.discount.all().exclude(id__in=excluded_ids)

# Second version
# print(our_cost)
# excluded_ids = []
# discounts = self.discount.all()
# our_cost = float(self.cost)

# def apply_discount(discount, cost):
#     if int(discount.constant_or_percentage) == 0:
#         return cost - (cost * discount.amount) / 100
#     elif int(discount.constant_or_percentage) == 1:
#         return cost - discount.amount

# while discounts:
#     main_result = 0
#     main_result_couse_discount = 0
#     course_discount_form = 0
    
#     for discount in discounts:
#         discount.amount = float(discount.amount)
#         result = apply_discount(discount, our_cost)
#         if result > main_result:
#             main_result = result
#             main_result_couse_discount = discount.amount
#             course_discount_form = int(discount.constant_or_percentage)
    
#     if course_discount_form == 1:
#         our_cost -= main_result_couse_discount
#     elif course_discount_form == 0:
#         our_cost = our_cost - (our_cost * main_result_couse_discount) / 100
    
#     excluded_ids.append(discounts.filter(amount=main_result_couse_discount).values_list('id', flat=True).first())
#     discounts = self.discount.all().exclude(id__in=excluded_ids)
    
#     print(our_cost, 'our resulted cost')
#     print(main_result_couse_discount, 'the couse of upper cost')
#     print(excluded_ids)